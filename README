== Package overview ==
=== Requirements ===
* Paget framework
* Moriarty library
* ARC2 library

=== Directory/file structure ===
<pre><nowiki>
favicon.ico
.htaccess                                   #contains rules for paget's URL dispatching
index.php                                   #main file that dispatches everything
js/
js/index.js                                 #main script for the site
js/jquery.min.js                            #jQuery JavaScript library
templates/
templates/default.resource.template.html    #default template that is used to output a resource. includes layout sections
templates/html.layout.template.html         #starts the document
templates/head.layout.template.html         #head element
templates/header.layout.template.html       #header section (e.g., site address, global navigation)
templates/footer.layout.template.html       #footer section (e.g., global navigation)
templates/foot.layout.template.html         #closes the document
templates/nav.local.layout.template.html    #local navigation (i.e., in context of the viewed page)

theme/
theme/base/
theme/base/css/display.css                  #layout, typography rules
theme/base/images/                          #common icons, illustrations
theme/base/icons/
theme/base/images/icons/icons-01.png        #main icons file (combined into a single file)
theme/base/illustrations/
theme/default/
theme/default/css/display.css               #imports base stylesheet, and contains background images and colour rules
</nowiki></pre>


=== Configuration ===
==== Fuseki setup and RDF dump import ====
<nowiki><pre>
svn co http://jena.svn.sourceforge.net/svnroot/jena/Fuseki/trunk fuseki
cd fuseki
mvn clean package
nano tdb.ttl                                #uncomment: tdb:unionDefaultGraph true ;
./fuseki-server --desc tdb.ttl /site

./s-put --verbose http://localhost:3030/dataset graphnname data.ttl
</pre></nowiki>


==== Site configuration ====
index.php contains the site settings:

===== Site settings =====
<nowiki><pre>
$this->config['site']['name']      = 'My 1337 site'
$this->config['site']['server']    = 'site';      /* 'site' in http://site */
$this->config['site']['path']      = '';          /* 'foo' in http://site/foo */
$this->config['site']['theme']     = 'site';      /* 'default' in /var/www/site/theme/default */
$this->config['site']['logo']      = 'logo.png';  /* logo.png in /var/www/site/theme/default/images/logo.png */
</pre></nowiki>

===== URI mapping =====
<nowiki><pre>
$this->config['entity']['dbpr']['path']     = '/resource';      /* dppr is the entity id, "/resource" is the path to that entity
$this->config['entity']['dbpr']['template'] = 'default.resource.template.html';    /* template used for this entity set */
</pre></nowiki>


===== PHP Classes =====
class LATC_Config
* Main configuration
* Contains base methods for working with the configuration vlaues
* It can be extended for site specific values
* Allows entity set configuration; entities are identified by id, and contain sub properties for URI path, querying, and the templating to be triggered.

getCurrentRequest()
* Figures out the URI pattern.

getEntityId()
* Returns the entity id from the current request.

getEntityPaths()
* Returns all of the entity paths that was set in site (index.php) and LATC configuration (latc_config.php).

getRemoteServer()
* Returns the server name that was set for URI mapping.

getRemoteURIFromCurrentRequest()
* Transforms the current request URI to the URI found in the RDF store.

getConfig()
* Returns all of the configuration values that was set in site (index.php) and LATC configuration (latc_config.php).



class SITE_Config
* extends LATC_Config
* Site specific configuration



class LATC_UriSpace extends PAGET_StoreBackedUriSpace
* Primary class that figures out the request and prepares a response


class LATC_ResourceDescription extends PAGET_ResourceDescription
* Figures out how to respond; prepares a SPARQL query to be used, reads the triples from the response, maps the URIs, assigns a template to be used for the HTML response


class LATC_StoreDescribeGenerator extends PAGET_StoreDescribeGenerator
* Figures out how to add the RDF triples to the index from the SPARQL query result.


class LATC_Template extends PAGET_Template
* LATC specific templates

class LATC_TableDataWidget extends PAGET_TableDataWidget
* Outputs a layout for tables


class LATC_Store extends Store
* Overrides Moriarty's default store URI


class LATC_SparqlServiceBase extends SparqlServiceBase
* Controls which SPARQL query to use


